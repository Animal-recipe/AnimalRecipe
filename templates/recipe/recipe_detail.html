{% extends 'base.html' %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/recipe/recipe_detail.css' %}">
<link rel="stylesheet" href="{% static 'css/recipe/recipe_list.css' %}">
<script type="text/javascript" src="{% static 'js/recipe/recipe_detail.js' %}"></script>

<div style="padding: 0 145px; width: 100%; height: 150px;background: #1B1B1B;border-radius: 0px 0px 80px 80px;">
    {% include 'nav.html' %}
</div>
<div style="height:65px;">
    <div id="box">
        <a onclick = "location.href='{% url 'recipe:edit_recipe' recipe_id=recipe.id %}'" style="color: #FFFFFF; cursor:pointer; ">수정</a>
        <span style="margin:0 10px;">  | </span>
        <a onclick = "location.href='{% url 'recipe:delete_recipe' recipe_id=recipe.id %}'" style="color: #FFFFFF; cursor:pointer;">삭제</a>
    </div>
</div>
<div style="margin: 0 auto; width:100%;">

    <div style="margin-top:30px; margin-left:219px;">
        <div style="overflow:hidden;">
            <div class="image_list"  style="width: 700px; height: 426px; float:left;">
                {% if img_list %}
                {% for img in img_list %}
                <div class="image">
                    <img class="img_style" src="{{ img.image.url }}" class="card-img-top" alt="사진">
                </div>
                {% endfor %}
                {% endif %}
            </div>
            <div style="width:62px; float:right; margin-right:218px; margin-top:174px;">
                <a id="like" href="{% url 'recipe:like_recipe' recipe.id %}" style="margin-left:5px;">
                    {% if click_like == 0 %}
                    <img style="width: 61.16px; height: 61.16px;" src="{% static 'img/recipe/recipe_detail/good1.png' %}" class="card-img-top" alt="사진">
                    {% else %}
                    <img style="width: 61.16px; height: 61.16px;" src="{% static 'img/recipe/recipe_detail/good_color.png' %}" class="card-img-top" alt="사진">
                    {% endif %}
                </a>
                <a href="{% url 'recipe:save_recipe' recipe.id %}" style="margin-left:5px;"><img style="width: 61.16px; height: 61.16px;" src="{% static 'img/recipe/recipe_detail/save1.png' %}" class="card-img-top" alt="사진"></a>
                <div style="float:left; text-align:center;">
                    <button type="button" style=" border: 0px; outline:0px;" data-toggle="modal" data-target=".bs-example-modal-lg">
                        <img style="width: 61.16px; height: 61.16px;" src="{% static 'img/recipe/recipe_detail/contact1.png' %}" class="card-img-top" alt="사진">
                    </button>
                </div>

            </div>
        </div>
        <div style="margin-top:60px;">
            <p id="title" style="width:70%;" >{{ recipe.title }}</p>
            <div style="overflow:hidden; margin-top:40px;">
                <img class="user_img" src="{{ recipe.author.profile.url }}">
                <p class="user_info">{{ recipe.author.nickname }} 의 레시피  |  작성일 : {{ recipe.created }}</p>
                <p class="count">
                    조회수 {{ recipe.hits }}   공감 {{ recipe.like.all.count }}
                </p>
            </div>
        </div>
        <div style="overflow:hidden; margin-top:58px;">
            <p id="animal">{{ recipe.animal }}</p>
            <p id="cook_time">{{ recipe.cooking_time }}</p>
            <p id="cook_level">{{ recipe.level }}</p>
        </div>

        <div id="summary">"{{ recipe.summary }} "</div>
        <div id="show_ingredient">
            재료를 준비해 주세요!
        </div>
        <div style="margin-top:75px; margin-left:10px;">
            {% for ingredient in ingredient_list %}
            <div style="overflow:hidden; width: 40%; margin-bottom:30px;">
                <p class="ingredient">{{ ingredient.ingredient }}</p>
                <p class="amount">{{ ingredient.amount }}</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <div style=" margin-top:106px; width: 100%; height: 338px;text-align:center;line-height:338px;background: #FFDADA;">
    ===========광고============
    </div>
    <div style="margin-top:121px; margin-left:219px;">
        <div id="follow">
            이렇게 따라해봐요!
        </div>
            {% for step in step_list %}
                <div style="margin-top:100px;">
                    <p class="step"> {{ step.procedure }} </p>
                    {% if step.image %}
                    <img style="margin-top:20px; width:589px; height:321px; border-radius: 24px;" src="{{ step.image.url }}" >
                    {% endif %}
                    <p class="content" style="word-break : break-all;">{{ step.content }}</p>
                </div>
            {% endfor %}
    </div>
    <div style=" margin: 0 auto; margin-top:152px;width: 100%; height: 400px;background: #1B1B1B;border-radius: 60px;">
        <div style="padding-top:85px; padding-left:121px; overflow:hidden; float:left;">
            <div style="float:left; text-align:center;">
                <a href="{% url 'recipe:like_recipe' recipe.id %}">
                    {% if click_like == 0 %}
                    <img style="width: 98px; height: 98px;" src="{% static 'img/recipe/recipe_detail/good1.png' %}" class="card-img-top" alt="사진">
                    {% else %}
                    <img style="width: 98px; height: 98px;" src="{% static 'img/recipe/recipe_detail/good_color.png' %}" class="card-img-top" alt="사진">
                    {% endif %}
                </a>
            </div>
            <div style="float:left; text-align:center; margin-left: 100px;">
                <a href="{% url 'recipe:save_recipe' recipe.id %}"><img style="width: 98px; height: 98px;" src="{% static 'img/recipe/recipe_detail/save1.png' %}" class="card-img-top" alt="사진"></a>
            </div>
            <div style="float:left; text-align:center; margin-left:40px;">
                <button type="button" style="background-color:#1B1B1B; border: 0px; outline:0px;" data-toggle="modal" data-target=".bs-example-modal-lg">
                    <img style="width: 98px; height: 98px;" src="{% static 'img/recipe/recipe_detail/contact1.png' %}" class="card-img-top" alt="사진">
                </button>
            </div>
            {% include 'contact\modal.html' %}
        </div>
        <div style="padding-top:85px; float:right; padding-right:121px;">
            <p id="white_title">{{ recipe.title_limit }}</p>
            <div style="overflow:hidden; margin-top:40px;">
                <img class="user_img" src="{{ recipe.author.profile.url }}">
                <p class="user_info">{{ recipe.author.nickname }} 의 레시피  |  작성일 : {{ recipe.updated }}</p>
                <p class="count">
                    조회수 {{ recipe.hits }}   공감 {{ recipe.like.all.count }}
                </p>
            </div>
            <div style="float:right; margin-top:160px; cursor:pointer;">
                <img style="float:left;" src="{% static 'img/recipe/recipe_detail/report.png' %}"/>
                <p id="report" style="float:left; margin-left:5px;" onclick = "location.href='{% url 'footer:Report' user_id=recipe.author %}'">신고하기</p>
            </div>
        </div>
    </div>
    <div style="margin: 50px auto; overflow:hidden; padding-bottom: 34px;">
        <p id="review_title" style="float:left; padding-top:15px; margin: 0 44%;">총 {{ count }}개의 <br>후기가 있어요!</p>
        <div id="create_review_css" style="float:right; margin-right:221px;">
            <a href="{% url 'review:create_review' recipe_id=recipe.id %}" style="color: #FFFFFF;">후기 작성하기</a>
            <img style="margin-left:15px;" src="{% static 'img/recipe/recipe_list/recipe_write.png' %}"/>
        </div>
    </div>
        <div style="padding: 0 200px; overflow:auto; width:100%;">
            {% if review_dict %}
                {% for item, image in review_dict.items %}
                <div class="recipe_size" onclick = "location.href='{% url 'review:detail_review' review_id=item.id %}'" >
                    <img class="recipe_img" src="{{ image }}" class="card-img-top" alt="사진">
                    <div style="padding-left:22px;">
                        <p class="recipe_title">"{{ item.title_limit }}"</p>
                        <div>
                            <p style="float:left;width: 20px;height: 20px;margin-top:7px;border-radius: 27px; background: #C4C4C4;"></p>
                            <p class="recipe_id">{{ item.author.nickname }}</p>
                        </div>
                        <div style="margin-top:29px; float: right; margin-right:40px;">
                            <p class="star"> ★   {{ item.star }}.0</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% endif %}
        </div>
</div>

{% endblock %}
